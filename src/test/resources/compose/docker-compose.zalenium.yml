---
version: '3.2'

services:

  selenium:
    image: elgalu/selenium
  zalenium:
    image: dosel/zalenium
#    user: seluser:<gid> # required when running in a swarm without sudo - use the <gid> of docker group of swarm
    hostname: zalenium
#    container_name: zalenium
    tty: true
    deploy:
      placement:
        constraints:
          - node.role == manager
    ports:
      - "4444:4444"
      - "8000:8000" # port for remote debugging zalenium code
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
#      - /tmp/videos:/home/seluser/videos
      - /D/TestVideos/Zelenium:/home/seluser/videos
      - /usr/bin/docker:/usr/bin/docker
    command: >
      start --desiredContainers 2
            --maxTestSessions 2
            --maxDockerSeleniumContainers 8
            --screenWidth 1280 --screenHeight 720
            --timeZone "Europe/Istanbul"
            --videoRecordingEnabled true
            --sauceLabsEnabled false
            --browserStackEnabled false
            --testingBotEnabled false
            --cbtEnabled false
            --lambdaTestEnabled false
            --startTunnel false
    environment:
      - HOST_UID
      - HOST_GID
      - ZALENIUM_PROXY_CLEANUP_TIMEOUT=1800
#      - PULL_SELENIUM_IMAGE=true
#    command: ["start", "--swarmOverlayNetwork", "STACK_zalenium", "--videoRecordingEnabled", "false"]